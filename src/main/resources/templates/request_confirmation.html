<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head th:replace="fragments/head :: head('シフト登録完了画面')"></head>

<body class="bg-gray-100">

<nav th:replace="fragments/nav :: nav"></nav>

<div class="container mx-auto mt-8 px-4 text-center">

    <h1 class="text-3xl font-bold text-gray-800 mb-4">シフト登録完了</h1>
    <h2 class="text-2xl font-semibold text-gray-800 mb-4"><span th:text="${user.name}"></span>のシフト登録が完了しました！</h2>

    <div id='calendar' class="mb-4"></div>

    <a th:href="@{/shift/request/user_select}" class="btn mt-6">ユーザー選択へ戻る</a>
</div>

<link href='https://cdn.jsdelivr.net/npm/fullcalendar@5.11.0/main.min.css' rel='stylesheet' />
<script src='https://cdn.jsdelivr.net/npm/fullcalendar@5.11.0/main.min.js'></script>
<script src='https://cdn.jsdelivr.net/npm/fullcalendar@5.11.0/locales-all.min.js'></script>

<style>
    /* カレンダーの高さを自動に設定 */
    #calendar {
        height: auto !important;
        overflow: visible !important;
    }
</style>

<script th:inline="javascript">
    /*<![CDATA[*/
    document.addEventListener('DOMContentLoaded', function() {
        var calendarEl = document.getElementById('calendar');

        var events = /*[[${eventsJson}]]*/ '[]';
        try {
            events = JSON.parse(events);
        } catch (e) {
            console.error("Error parsing events JSON", e);
        }

        var calendar = new FullCalendar.Calendar(calendarEl, {
            initialView: 'dayGridMonth',
            locale: 'ja',
            height: 'auto', // カレンダーの高さを自動に設定
            events: events
        });

        calendar.render();
    });
    /*]]>*/
</script>
<footer th:replace="fragments/footer :: footer"></footer>

</body>
</html>
